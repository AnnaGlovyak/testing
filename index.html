<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    
    * {
	box-sizing: border-box;
}

html, body {
	margin: 0;
	padding: 0;
}

input {
	display: block;
	width: 100%;
	font-size: 20px;
}

[data-stickto] {
	position: fixed;
    transform: translateZ(0);
}

[data-stickto="top"] {
	top: 0;
	background: red;
}

[data-stickto="bottom"] {
	bottom: 0;
	background: green;
}
  </style>
  <title>Template</title>
</head>
<body>

    <input type="text" data-stickto="top" />
    <input type="text" data-stickto="bottom" />
    
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas scelerisque pellentesque nisi sit amet tincidunt. Duis mollis lorem porta varius ornare. Cras consectetur, mi non auctor sagittis, dui odio ullamcorper velit, nec cursus eros mi et elit. Proin nec magna porta, tempus neque eget, venenatis lacus. Nulla sed mauris at metus varius cursus. Etiam vestibulum finibus pharetra. Mauris pellentesque est ut nulla volutpat feugiat.</p>
    
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas scelerisque pellentesque nisi sit amet tincidunt. Duis mollis lorem porta varius ornare. Cras consectetur, mi non auctor sagittis, dui odio ullamcorper velit, nec cursus eros mi et elit. Proin nec magna porta, tempus neque eget, venenatis lacus. Nulla sed mauris at metus varius cursus. Etiam vestibulum finibus pharetra. Mauris pellentesque est ut nulla volutpat feugiat.</p>
    
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas scelerisque pellentesque nisi sit amet tincidunt. Duis mollis lorem porta varius ornare. Cras consectetur, mi non auctor sagittis, dui odio ullamcorper velit, nec cursus eros mi et elit. Proin nec magna porta, tempus neque eget, venenatis lacus. Nulla sed mauris at metus varius cursus. Etiam vestibulum finibus pharetra. Mauris pellentesque est ut nulla volutpat feugiat.</p>
    
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas scelerisque pellentesque nisi sit amet tincidunt. Duis mollis lorem porta varius ornare. Cras consectetur, mi non auctor sagittis, dui odio ullamcorper velit, nec cursus eros mi et elit. Proin nec magna porta, tempus neque eget, venenatis lacus. Nulla sed mauris at metus varius cursus. Etiam vestibulum finibus pharetra. Mauris pellentesque est ut nulla volutpat feugiat.</p>
    
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas scelerisque pellentesque nisi sit amet tincidunt. Duis mollis lorem porta varius ornare. Cras consectetur, mi non auctor sagittis, dui odio ullamcorper velit, nec cursus eros mi et elit. Proin nec magna porta, tempus neque eget, venenatis lacus. Nulla sed mauris at metus varius cursus. Etiam vestibulum finibus pharetra. Mauris pellentesque est ut nulla volutpat feugiat.</p>
    
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas scelerisque pellentesque nisi sit amet tincidunt. Duis mollis lorem porta varius ornare. Cras consectetur, mi non auctor sagittis, dui odio ullamcorper velit, nec cursus eros mi et elit. Proin nec magna porta, tempus neque eget, venenatis lacus. Nulla sed mauris at metus varius cursus. Etiam vestibulum finibus pharetra. Mauris pellentesque est ut nulla volutpat feugiat.</p>
    
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas scelerisque pellentesque nisi sit amet tincidunt. Duis mollis lorem porta varius ornare. Cras consectetur, mi non auctor sagittis, dui odio ullamcorper velit, nec cursus eros mi et elit. Proin nec magna porta, tempus neque eget, venenatis lacus. Nulla sed mauris at metus varius cursus. Etiam vestibulum finibus pharetra. Mauris pellentesque est ut nulla volutpat feugiat.</p>
    
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas scelerisque pellentesque nisi sit amet tincidunt. Duis mollis lorem porta varius ornare. Cras consectetur, mi non auctor sagittis, dui odio ullamcorper velit, nec cursus eros mi et elit. Proin nec magna porta, tempus neque eget, venenatis lacus. Nulla sed mauris at metus varius cursus. Etiam vestibulum finibus pharetra. Mauris pellentesque est ut nulla volutpat feugiat.</p>
    
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas scelerisque pellentesque nisi sit amet tincidunt. Duis mollis lorem porta varius ornare. Cras consectetur, mi non auctor sagittis, dui odio ullamcorper velit, nec cursus eros mi et elit. Proin nec magna porta, tempus neque eget, venenatis lacus. Nulla sed mauris at metus varius cursus. Etiam vestibulum finibus pharetra. Mauris pellentesque est ut nulla volutpat feugiat.</p>
    
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas scelerisque pellentesque nisi sit amet tincidunt. Duis mollis lorem porta varius ornare. Cras consectetur, mi non auctor sagittis, dui odio ullamcorper velit, nec cursus eros mi et elit. Proin nec magna porta, tempus neque eget, venenatis lacus. Nulla sed mauris at metus varius cursus. Etiam vestibulum finibus pharetra. Mauris pellentesque est ut nulla volutpat feugiat.</p>
    
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas scelerisque pellentesque nisi sit amet tincidunt. Duis mollis lorem porta varius ornare. Cras consectetur, mi non auctor sagittis, dui odio ullamcorper velit, nec cursus eros mi et elit. Proin nec magna porta, tempus neque eget, venenatis lacus. Nulla sed mauris at metus varius cursus. Etiam vestibulum finibus pharetra. Mauris pellentesque est ut nulla volutpat feugiat.</p>
    
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas scelerisque pellentesque nisi sit amet tincidunt. Duis mollis lorem porta varius ornare. Cras consectetur, mi non auctor sagittis, dui odio ullamcorper velit, nec cursus eros mi et elit. Proin nec magna porta, tempus neque eget, venenatis lacus. Nulla sed mauris at metus varius cursus. Etiam vestibulum finibus pharetra. Mauris pellentesque est ut nulla volutpat feugiat.</p>
    
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas scelerisque pellentesque nisi sit amet tincidunt. Duis mollis lorem porta varius ornare. Cras consectetur, mi non auctor sagittis, dui odio ullamcorper velit, nec cursus eros mi et elit. Proin nec magna porta, tempus neque eget, venenatis lacus. Nulla sed mauris at metus varius cursus. Etiam vestibulum finibus pharetra. Mauris pellentesque est ut nulla volutpat feugiat.</p>
    
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas scelerisque pellentesque nisi sit amet tincidunt. Duis mollis lorem porta varius ornare. Cras consectetur, mi non auctor sagittis, dui odio ullamcorper velit, nec cursus eros mi et elit. Proin nec magna porta, tempus neque eget, venenatis lacus. Nulla sed mauris at metus varius cursus. Etiam vestibulum finibus pharetra. Mauris pellentesque est ut nulla volutpat feugiat.</p>
</body>
<script>
// @ref https://github.com/WICG/visual-viewport
// @ref https://developer.mozilla.org/en-US/docs/Web/API/Visual_Viewport_API
// @ref https://rdavis.io/articles/dealing-with-the-visual-viewport
console.clear();

let pendingUpdate = false;

function viewportHandler(event) {
	if (pendingUpdate) return;
	pendingUpdate = true;

	requestAnimationFrame(() => {
		pendingUpdate = false;
		
		// Stick to top
		document.querySelector('[data-stickto="top"]').style.transform = `translateY(${ Math.max(0,Math.min(
                document.documentElement.scrollHeight - window.visualViewport.height,
                window.visualViewport.offsetTop
            ))}px)`;
		
		// Stick to bottom
		if (window.visualViewport.offsetTop >= 0) { 
			// document.querySelector('[data-stickto="bottom"]').style.marginBottom = `${Math.max(0, window.innerHeight - window.visualViewport.height - window.visualViewport.offsetTop)}px`;
			document.querySelector('[data-stickto="bottom"]').style.transform = `translateY(-${Math.max(0, window.innerHeight - window.visualViewport.height - window.visualViewport.offsetTop)}px)`;
		}
	});
}

window.visualViewport.addEventListener("scroll", viewportHandler);
window.visualViewport.addEventListener("resize", viewportHandler);

</script>
</html>